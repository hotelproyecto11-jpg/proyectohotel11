<div style="padding: 15px;">
  <div style="margin-bottom: 15px;">
    <h3>Gestión de Habitaciones</h3>
    <button (click)="toggleForm()" [style.background]="showForm ? '#ff9800' : '#4caf50'">
      {{ showForm ? 'Cancelar' : '+ Agregar Habitación' }}
    </button>
  </div>

  <div *ngIf="successMessage" style="color: green; padding: 10px; background: #e8f5e9; margin-bottom: 10px;">
    {{ successMessage }}
  </div>
  <div *ngIf="errorMessage" style="color: red; padding: 10px; background: #ffebee; margin-bottom: 10px;">
    {{ errorMessage }}
  </div>

  <!-- Formulario de creación -->
  <div *ngIf="showForm" style="border: 1px solid #ddd; padding: 15px; margin-bottom: 20px; background: #f9f9f9;">
    <h4>Nueva Habitación</h4>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
      <div>
        <label>Hotel *</label>
        <select [(ngModel)]="newRoom.hotelId">
          <option *ngFor="let h of hotels" [value]="h.id">{{ h.name }}</option>
        </select>
      </div>
      <div>
        <label>Número de Habitación *</label>
        <input type="text" [(ngModel)]="newRoom.roomNumber" placeholder="ej: 101" />
      </div>
      <div>
        <label>Tipo de Habitación *</label>
        <select [(ngModel)]="newRoom.type">
          <option *ngFor="let type of roomTypes" [value]="type">{{ type }}</option>
        </select>
      </div>
      <div>
        <label>Capacidad (Personas) *</label>
        <input type="number" [(ngModel)]="newRoom.capacity" min="1" />
      </div>
      <div>
        <label>Precio Base (MXN) *</label>
        <input type="number" [(ngModel)]="newRoom.basePrice" min="0" />
      </div>
      <div>
        <label>Cantidad de Habitaciones</label>
        <input type="number" [(ngModel)]="newRoom.quantity" min="1" />
      </div>
      <div>
        <label>Metros Cuadrados</label>
        <input type="number" [(ngModel)]="newRoom.squareMeters" min="0" />
      </div>
      <div>
        <label>
          <input type="checkbox" [(ngModel)]="newRoom.hasBalcony" />
          ¿Tiene Balcón?
        </label>
      </div>
      <div>
        <label>
          <input type="checkbox" [(ngModel)]="newRoom.hasSeaView" />
          ¿Vista al Mar?
        </label>
      </div>
    </div>
    <div style="margin-top: 15px;">
      <button (click)="saveRoom()" style="background: #4caf50; margin-right: 10px;">Guardar</button>
      <button (click)="toggleForm()" style="background: #f44336;">Cancelar</button>
    </div>
  </div>

  <!-- Lista de habitaciones -->
  <div *ngIf="isLoading" style="text-align: center; padding: 20px;">
    Cargando habitaciones...
  </div>

  <div *ngIf="!isLoading && rooms.length > 0" style="overflow-x: auto;">
    <table style="width: 100%; border-collapse: collapse;">
      <thead>
        <tr style="background: #f0f0f0;">
          <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Número</th>
          <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Tipo</th>
          <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Hotel</th>
          <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Capacidad</th>
          <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Precio Base</th>
          <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let room of rooms" style="border-bottom: 1px solid #ddd;">
          <td style="padding: 10px; border: 1px solid #ddd;">{{ room.roomNumber }}</td>
          <td style="padding: 10px; border: 1px solid #ddd;">{{ room.type }}</td>
          <td style="padding: 10px; border: 1px solid #ddd;">{{ room.hotelName }}</td>
          <td style="padding: 10px; border: 1px solid #ddd;">{{ room.capacity }}</td>
          <td style="padding: 10px; border: 1px solid #ddd;">${{ room.basePrice }}</td>
          <td style="padding: 10px; border: 1px solid #ddd;">
            <button (click)="deleteRoom(room)" style="background: #f44336; padding: 5px 10px;">Eliminar</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="!isLoading && rooms.length === 0" style="text-align: center; padding: 20px; color: #999;">
    No hay habitaciones. Crea una para empezar.
  </div>
</div>
